# RBAC(역할/권한) 권장안

## 역할 정의(권장)
- **Owner**: 프로젝트 소유자(최고 권한)
- **Admin**: 운영자(프로젝트 운영 전반)
- **Editor**: 내부 제작자(편집 중심)
- **Author**: 외부 작가(작성 중심)
- **Reviewer**: 검수자(승인/반려 중심)
- **Viewer**: 읽기 전용

## 권한 범위(요약)
### Owner
- 프로젝트 생성/삭제/이관
- 멤버 초대/권한 변경/퇴출
- 전역 로어북/전역 룰/씬/캐스트/배포 전부 가능

### Admin
- 프로젝트 운영 전반(캐스트/씬/전역 데이터/배포) 가능
- 멤버 권한 변경은 제한(권장: Owner만)

### Editor
- 캐스트/씬/로어북/룰 편집 가능
- 배포는 “허용” 또는 “승인 필요” 중 선택(권장: 승인 필요)

### Author(외부 작가)
- 본인 프로젝트 내 **Draft 생성/수정** 가능(캐스트/씬/로어/룰)
- 삭제/배포는 제한(권장: Reviewer 승인 필수)

### Reviewer
- 검수/코멘트/승인/반려 가능
- 배포 승인 권한(정책 선택)

### Viewer
- 조회만 가능

## 권장 배포 정책
- 외부 작가가 포함되면 권장 플로우:
  - Author: Draft 작성 → Review 요청
  - Reviewer: 승인/반려
  - Admin/Owner: 배포 실행(또는 Reviewer가 배포 승인까지)

## 리소스 스코프(중요)
권한은 “전역”이 아니라 **Project 단위**로 부여합니다.
- `project_members`(project_id, user_id, role)를 기준으로 권한 판단
- Supabase RLS로 project_id 스코프를 강제(권장)

